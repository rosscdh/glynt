{% extends 'base.html' %}{% load crispy_forms_tags %}

{% block page_title %}Marketplace{% endblock %}
{% block bodyclass %}lawyer-welcome{% endblock %}


{% block prebody %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/theme/lawyer-listing.css" type="text/css">

    
<div id="hero">
	<div class="container">
		<!-- starts carousel -->
		<div class="row animated fadeInDown">
			<div class="span12">
				<h1>Find the lawyer to help your company grow</h1>
			</div>
		</div>
		<div class="dock">
			<ul>
				<li class="dock-packages"><a href="#" title="Packages">Packages</a></li>
				<li class="dock-firms"><a href="#" title="Firms">Firms</a></li>
				<li class="dock-lawyers dock-active"><a href="#" title="Lawyers">Lawyers</a></li>
			</ul>
		</div>
	</div>
</div>

{% endblock %}

{% block body %}

<div class="container filter">

    <form id="lawyer-list-form" data-validate="parsley" action="{% url 'lawyer:list' %}" method="GET" class="form-inline">{% csrf_token %}
        {{ form.q|as_crispy_field }}
        <button id="lawyer-list-filter" type="submit" class="submit btn btn-primary">Search</button>
    </form>

</div>


<div class="container">

	{% include page_template %}

</div>


{% endblock %}

{% block js %}
    {{ block.super }}
    <script id="controls-search">
    $(document).ready(function(){
        $('button#lawyer-list-filter').live('click', function(event){
            event.preventDefault();
            var form = $( 'form#lawyer-list-form' );
            var query = encodeURIComponent($('#id_q').val());
            if (form.parsley( 'validate' )) {
                document.location = form.attr('action') + '?q={query}'.assign({'query': query }) ;
            }
        });
    });
    </script>
    <script src="{{ STATIC_URL }}endless_pagination/js/endless-pagination.js"></script>
    <script>
        $.endlessPaginate({
            paginateOnScroll: true
            ,paginateOnScrollMargin: 60
            ,paginateOnScrollChunkSize: 5
        });
    </script>
{% endblock %}