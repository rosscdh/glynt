{% load lawyer_profile_tags endless jsonify glynt_helpers humanize %}
{% lazy_paginate object_list %}

{% for l in object_list %}
<div class="clearfix partner">

    <a class="partner-avatar" href="{% url 'lawyer:profile' slug=l.username %}">
        <img src="{{ l.profile_photo }}"/>
    </a>

    <div class="partner-overview">
        <h2 class="partner-name"><a href="{% url 'lawyer:profile' slug=l.username %}">{{ l.full_name }}</a></h2>

        <h3>{{ l.summary|truncatechars:55 }}</h3>

        {% if l.firm_name %}
            <h3>{% if l.position %}{{ l.position }} <span>at</span> {% endif %}{{ l.firm_name }}</h3>
        {% endif %}

        <ul class="partner-info">
            <li class="marker big">
                {% for practice_location in l.object.practice_locations  %}
                {{ practice_location }}{% if not forloop.last %} <span>and</span> {% endif %}
                {% endfor %}
            </li>
        </ul>
    </div>

    {% if l.seed_financing_amount_min or l.incorporation_min %}
    <div class="card-bordered card-transaction">
        <ul>
            <li><span class="transaction">Seed Financing</span><span class="transaction-amount">${{ l.seed_financing_amount_min|humanise_number }} &ndash; ${{ l.seed_financing_amount_max|humanise_number }}</span><span class="icons"><i class="{% if i.seed_fee_cap_available %}icap{% else %}no-icap{% endif %} tip" data-toggle="tooltip" title="Fee cap available for this transaction"></i><i class="{% if i.seed_deferred_fees_available %}ideferred{% else %}no-ideferred{% endif %} tip" data-toggle="tooltip" title="Deferred fees available for this transaction"></i><i class="{% if l.seed_fixed_fees_available %}ifixed{% else %}no-ifixed{% endif %} tip" data-toggle="tooltip" title="Fixed fees available for this transaction"></i></span></li>
            <li><span class="transaction">Financing</span><span class="transaction-amount">${{ l.incorporation_min|humanise_number }} &ndash; ${{ l.incorporation_max|humanise_number }}</span><span class="icons"><i class="{% if i.inc_fee_cap_available %}icap{% else %}no-icap{% endif %} tip" data-toggle="tooltip" title="Fee cap available for this transaction"></i><i class="{% if i.inc_deferred_fees_available %}ideferred{% else %}no-ideferred{% endif %} tip" data-toggle="tooltip" title="Deferred fees available for this transaction"></i><i class="{% if l.inc_fixed_fees_available %}ifixed{% else %}no-ifixed{% endif %} tip" data-toggle="tooltip" title="Fixed fees available for this transaction"></i></span></li>
        </ul>
        <a href="{% url 'lawyer:profile' slug=l.username %}" class="transaction-view-all"><span>View all</span></a>
    </div>
    {% endif %}
</div>
{% empty %}
 <div class="row">
    <div class="span12">
        <div class="no-results">
            Sorry, no lawyers found in that area.
            More are signing up every day, so check back in a week or so. 
        </div>
    </div>
</div>
{% endfor %}

{% show_more %}

{% block js %}
    <script>
        $(document).ready(function () {
            $('.tip').tooltip();
        });
    </script>
{% endblock %}
