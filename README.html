<h1>The Glynt Project</h1>

<h2>Basic Installation</h2>

<ol>
<li><code>easy_install pip</code></li>
<li><code>pip install virtualenv virtualenvwrapper</code></li>
<li><p>Perform these steps</p>

<p>export WORKON<em>HOME=~/.virtualenvs
mkdir -p $WORKON</em>HOME
source /usr/local/bin/virtualenvwrapper.sh
echo "source /usr/local/bin/virtualenvwrapper.sh" >> ~/.bash_profile</p></li>
<li><p>mkvirtualenv --no-site-packages glynt</p></li>
<li><code>cd /path/to/glynt</code></li>
<li><code>pip install -r requirements.txt</code> : install update the required libraries (append --upgrade if you are not sure)</li>
<li><code>python manage.py syncdb</code> : sync the database; and create the default user if there is not already one
7a. <code>python manage.py migrate socialregistration --fake</code> : there is a small issue with socialregistration at the moment and its migration needs to be faked</li>
<li><code>python manage.py migrate</code> : perform the rest of the migrations</li>
<li><code>python manage.py loaddata sites document_category documenttemplate public/fixtures/cms.json</code></li>
<li><code>python manage.py check_permissions</code> # Creates the userena permissions</li>
<li>Thats it you can now <code>python manage.py runserver_plus</code></li>
<li>access http://local.weareml.com:8000/ (you may need to add 127.0.0.1 local.weareml.com to your /etc/hosts file)</li>
</ol>

<h2>Update requirments</h2>

<ol>
<li><code>pip install --upgrade pip</code> - ensure latest version</li>
<li><code>pip install -r requirements.txt</code> : install update the required libraries (append --upgrade if you are not sure)</li>
</ol>

<h2>Creating Fixtures</h2>

<p><em>* Document Templates *</em></p>

<pre><code>`./manage.py dumpdata document.documenttemplate &gt; glynt/apps/document/fixtures/documenttemplate.json`
</code></pre>

<p><em>* Django CMS *</em></p>

<pre><code>`./manage.py dumpdata cms text cms.placeholder cms.cmsplugin &gt; public/fixtures/cms.json`
</code></pre>

<h2>Django CMS - Dev Pages to live</h2>

<p><code>manage.py shell_plus</code></p>

<pre><code>`Page.objects.filter(site=Site.objects.get(pk=1)).update(site=Site.objects.get(pk=3))`
</code></pre>

<h2>Fix Fixtures</h2>

<h3>When manage.py dumpdata flyform.flyform --format=xml > ~/flyform.xml</h3>

<p>Remember to replace bad json:</p>

<p><code>vim glynt/apps/flyform/fixtures/flyform.xml</code></p>

<pre><code>:%s/u'/"/gc
:%s/',/\",/gc
:%s/':/\":/gc
:%s/'\}/\"\}/gc
</code></pre>

<h3>When manage.py dumpdata document.document --format=xml > ~/document.xml</h3>

<p>Remember to remove invalid xml return characters using vim:</p>

<p><code>vim glynt/apps/document/fixtures/document.xml</code></p>

<pre><code>:%s/\%x0c/\r/gc
</code></pre>

<ol>
<li><code>python manage.py loaddata sites document_category document_flyform</code></li>
</ol>

<h2>Markdown</h2>

<ol>
<li>For a complete overview of markdown: http://stackoverflow.com/editing-help</li>
<li>Install html2text to convert html to Markdown (```pip install html2text```)</li>
</ol>

<h2>Docs</h2>

<ol>
<li>found in the /docs folder</li>
</ol>
